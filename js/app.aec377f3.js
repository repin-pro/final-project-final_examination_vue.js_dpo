(function(){"use strict";var t={2604:function(t,e,r){var a=r(6369),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header",{staticClass:"header container"},[r("div",{staticClass:"header__wrapper"},[r("span",{staticClass:"header__info"},[t._v("Каталог")]),r("router-link",{staticClass:"header__logo",attrs:{to:{name:"main"}}},[r("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})]),r("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),t.cartLoading?r("PagePreloader",{staticClass:"cart-indicator"}):r("CartIndicator")],1)]),r("router-view",{attrs:{cartloading:t.cartLoading}}),r("footer",{staticClass:"footer container"},[r("div",{staticClass:"footer__wrapper"},[t._m(0),r("ul",{staticClass:"footer__social social"},[r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[r("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[r("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[r("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[r("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[r("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),r("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(1),r("span",{staticClass:"footer__copyright"},[t._v(" © 2020 Moire ")])])])],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"footer__links"},[r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),r("li",[r("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),r("li",[r("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@technozavrrr.com"}},[t._v(" hi@technozavrrr.com ")])]),r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),r("li",[r("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"footer__data"},[r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-link",{staticClass:"header__cart",attrs:{"aria-label":"Корзина с товарами",to:{name:"cart"}}},[r("svg",{attrs:{width:"19",height:"24"}},[r("use",{attrs:{"xlink:href":"#icon-cart"}})]),r("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.$store.state.cartProducts.length))])])},c=[],l=r(1001),n={},d=(0,l.Z)(n,i,c,!1,null,null,null),u=d.exports,p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preloader"},[r("div",{staticClass:"preloader-dot"}),r("div",{staticClass:"preloader-dot"}),r("div",{staticClass:"preloader-dot"}),r("div",{staticClass:"preloader-dot"}),r("div",{staticClass:"preloader-dot"})])}],m={},f=(0,l.Z)(m,p,_,!1,null,null,null),v=f.exports,h=r(3822),C={data(){return{cartLoading:!0}},components:{CartIndicator:u,PagePreloader:v},methods:{...(0,h.nv)(["loadCart"]),...(0,h.OI)(["updateUserAccessKey"])},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart().then((()=>this.cartLoading=!1))}},g=C,y=(0,l.Z)(g,s,o,!1,null,null,null),b=y.exports,P=r(2631),k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("div",{staticClass:"content__row"},[r("h1",{staticClass:"content__title"},[t._v("Каталог")]),r("span",{staticClass:"content__info"},[t._v(" "+t._s(t.productsCount)+" товаров ")])])]),r("div",{staticClass:"content__catalog"},[r("ProductFilter",{attrs:{"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo,"category-id":t.filterCategoryId,"product-color":t.filterColor,"material-ids":t.filterMaterial,"season-ids":t.filterSeason,productsAmountOptions:t.productsAmountOptions},on:{"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e},"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:productColor":function(e){t.filterColor=e},"update:product-color":function(e){t.filterColor=e},"update:materialIds":function(e){t.filterMaterial=e},"update:material-ids":function(e){t.filterMaterial=e},"update:seasonIds":function(e){t.filterSeason=e},"update:season-ids":function(e){t.filterSeason=e},updateProductPerPage:function(e){t.productsPerPage=e}}}),r("section",{staticClass:"catalog"},[t.productsLoadingFailed?r("div",[t._v("Не удалось загрузить товары...")]):t.productsLoading?r("PagePreloader"):r("ProductList",{attrs:{products:t.products}}),r("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},I=[],D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return r("ProductItem",{key:t.id,attrs:{product:t}})})),1)},T=[],$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"catalog__item"},[r("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[r("ProductImage",{attrs:{product:t.product,selectedColor:t.selectedColor}})],1),r("h3",{staticClass:"catalog__title"},[r("router-link",{attrs:{to:{name:"product",params:{id:t.product.id}}}},[t._v(" "+t._s(t.product.title)+" ")])],1),r("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ₽ ")]),r("ProductColors",{attrs:{colors:t.colors},on:{updateColor:function(e){t.selectedColor=e}}})],1)},w=[];function x(t){return(new Intl.NumberFormat).format(t)}var A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.colors?r("ul",{staticClass:"colors colors--black"},t._l(t.colors,(function(e){return r("li",{key:e.color.id,staticClass:"colors__item"},[r("label",{staticClass:"colors__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedColor,expression:"selectedColor"}],staticClass:"colors__radio sr-only",attrs:{type:"radio"},domProps:{value:e.color.id,checked:t._q(t.selectedColor,e.color.id)},on:{click:t.changeColor,change:function(r){t.selectedColor=e.color.id}}}),r("span",{staticClass:"colors__value",style:{"background-color":e.color.code}})])])})),0):t._e()},F=[],S={data(){return{selectedColor:this.colors[0].color.id}},props:["colors"],methods:{changeColor(t){this.selectedColor=Number(t.target.value),this.$emit("updateColor",this.selectedColor)}}},E=S,O=(0,l.Z)(E,A,F,!1,null,null,null),M=O.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.gallery?r("img",{attrs:{src:t.selectedImage,alt:t.product.title}}):r("div",[t._v("Фото отсутствует")])])},Z=[],N={props:["product","selectedColor"],computed:{mainColor(){return this.product.colors.find((t=>t.color.id===this.selectedColor))},selectedImage(){return this.mainColor.gallery[0].file.url},gallery(){return this.mainColor.gallery}}},K=N,z=(0,l.Z)(K,L,Z,!1,null,null,null),B=z.exports,V={data(){return{selectedColor:this.product.colors[0].color.id}},components:{ProductColors:M,ProductImage:B},props:["product"],filters:{numberFormat:x},computed:{colors(){return this.product.colors}}},q=V,U=(0,l.Z)(q,$,w,!1,null,null,null),j=U.exports,G={components:{ProductItem:j},props:["products"]},H=G,J=(0,l.Z)(H,D,T,!1,null,null,null),Q=J.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",{staticClass:"filter"},[r("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("legend",{staticClass:"form__legend"},[t._v("Товаров на странице")]),r("label",{staticClass:"form__label form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.productsPerPage,expression:"productsPerPage",modifiers:{number:!0}}],staticClass:"form__select",attrs:{name:"productPerPage"},on:{click:t.changeProductPerPage,change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var r="_value"in e?e._value:e.value;return t._n(r)}));t.productsPerPage=e.target.multiple?r:r[0]}}},t._l(t.productsAmountOptions,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Цена")]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("От")])]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("До")])])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Категория")]),r("label",{staticClass:"form__label form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentCategoryId,expression:"currentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var r="_value"in e?e._value:e.value;return t._n(r)}));t.currentCategoryId=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Цвет")]),r("ul",{staticClass:"colors colors--black"},t._l(t.colors,(function(e){return r("li",{key:e.id,staticClass:"colors__item"},[r("label",{staticClass:"colors__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedColor,expression:"selectedColor",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.selectedColor)?t._i(t.selectedColor,e.id)>-1:t.selectedColor},on:{change:function(r){var a=t.selectedColor,s=r.target,o=!!s.checked;if(Array.isArray(a)){var i=t._n(e.id),c=t._i(a,i);s.checked?c<0&&(t.selectedColor=a.concat([i])):c>-1&&(t.selectedColor=a.slice(0,c).concat(a.slice(c+1)))}else t.selectedColor=o}}}),r("span",{staticClass:"colors__value",style:{"background-color":e.code}})])])})),0)]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Материал")]),r("ul",{staticClass:"check-list"},t._l(t.materials,(function(e){return r("li",{key:e.id,staticClass:"check-list__item"},[r("label",{staticClass:"check-list__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentMaterialId,expression:"currentMaterialId",modifiers:{number:!0}}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material"},domProps:{value:e.id,checked:Array.isArray(t.currentMaterialId)?t._i(t.currentMaterialId,e.id)>-1:t.currentMaterialId},on:{change:function(r){var a=t.currentMaterialId,s=r.target,o=!!s.checked;if(Array.isArray(a)){var i=t._n(e.id),c=t._i(a,i);s.checked?c<0&&(t.currentMaterialId=a.concat([i])):c>-1&&(t.currentMaterialId=a.slice(0,c).concat(a.slice(c+1)))}else t.currentMaterialId=o}}}),r("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),r("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),r("ul",{staticClass:"check-list"},t._l(t.seasons,(function(e){return r("li",{key:e.id,staticClass:"check-list__item"},[r("label",{staticClass:"check-list__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentSeasonsId,expression:"currentSeasonsId",modifiers:{number:!0}}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection"},domProps:{value:e.id,checked:Array.isArray(t.currentSeasonsId)?t._i(t.currentSeasonsId,e.id)>-1:t.currentSeasonsId},on:{change:function(r){var a=t.currentSeasonsId,s=r.target,o=!!s.checked;if(Array.isArray(a)){var i=t._n(e.id),c=t._i(a,i);s.checked?c<0&&(t.currentSeasonsId=a.concat([i])):c>-1&&(t.currentSeasonsId=a.slice(0,c).concat(a.slice(c+1)))}else t.currentSeasonsId=o}}}),r("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),r("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),r("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.resetButton,expression:"resetButton"}],staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(" Сбросить ")])])])},W=[],X=r(6265),Y=r.n(X);const tt="https://vue-moire.skillbox.cc";var et={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentMaterialId:[],currentSeasonsId:[],selectedColor:[],categoriesData:null,filterColorsData:null,filterMaterialsData:null,filterSeasonsData:null,resetButton:!1,productsPerPage:12}},props:["priceFrom","priceTo","categoryId","productColor","materialIds","seasonIds","productsAmountOptions"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return this.filterColorsData?this.filterColorsData.items:[]},materials(){return this.filterMaterialsData?this.filterMaterialsData.items:[]},seasons(){return this.filterSeasonsData?this.filterSeasonsData.items:[]}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},productColor(t){this.selectedColor=t},materialIds(t){this.currentMaterialId=t},seasonIds(t){this.currentSeasonsId=t}},methods:{submit(){(this.currentPriceFrom||this.currentPriceTo||this.currentCategoryId||this.currentMaterialId.length||this.currentSeasonsId.length||this.selectedColor.length)&&(this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:productColor",this.selectedColor),this.$emit("update:materialIds",this.currentMaterialId),this.$emit("update:seasonIds",this.currentSeasonsId),this.resetButton=!0)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:productColor",[]),this.$emit("update:materialIds",[]),this.$emit("update:seasonIds",[]),this.resetButton=!1},async loadCategories(){const t=Y().get(`${tt}/api/productCategories`),e=await t;this.categoriesData=e.data},async loadColors(){const t=Y().get(`${tt}/api/colors`),e=await t;this.filterColorsData=e.data},async loadMaterials(){const t=Y().get(`${tt}/api/materials`),e=await t;this.filterMaterialsData=e.data},async loadSeasons(){const t=Y().get(`${tt}/api/seasons`),e=await t;this.filterSeasonsData=e.data},changeProductPerPage(t){this.productPerPage=Number(t.target.value),this.$emit("updateProductPerPage",this.productPerPage)}},created(){this.loadCategories(),this.loadColors(),this.loadMaterials(),this.loadSeasons()}},rt=et,at=(0,l.Z)(rt,R,W,!1,null,null,null),st=at.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__pagination pagination"},[r("li",{staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{"aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page-1)},keypress:function(e){return e.preventDefault(),t.paginate(t.page-1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(e){return r("li",{key:e,staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},on:{click:function(r){return r.preventDefault(),t.paginate(e)},keypress:function(r){return r.preventDefault(),t.paginate(e)}}},[t._v(" "+t._s(e)+" ")])])})),r("li",{staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.pages},attrs:{"aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page+1)},keypress:function(e){return e.preventDefault(),t.paginate(t.page+1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},it=[],ct={model:{prop:"page",event:"paginate"},props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){t>=1&&t<=this.pages&&this.$emit("paginate",t)}}},lt=ct,nt=(0,l.Z)(lt,ot,it,!1,null,null,null),dt=nt.exports,ut={data(){return{page:1,productsPerPage:12,filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterMaterial:null,filterSeason:null,filterColor:null,productsData:null,productsLoading:!1,productsLoadingFailed:!1,productsArray:"",productsCount:"",productsAmountOptions:[3,6,12]}},components:{BasePagination:dt,ProductList:Q,ProductFilter:st,PagePreloader:v},computed:{products(){return this.productsData?this.productsData.items:[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{async loadProductsCount(){const t=Y().get(`${tt}/api/products`),e=await t;this.productsCount=e.data.items.length},async loadProducts(){try{this.productsLoading=!0,this.productsLoadingFailed=!1;const t=Y().get(`${tt}/api/products`,{params:{page:this.page,limit:this.productsPerPage,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,categoryId:this.filterCategoryId,materialIds:this.filterMaterial,seasonIds:this.filterSeason,colorIds:this.filterColor}}),e=await t;this.productsData=e.data}catch(t){this.productsLoadingFailed=!0}this.productsLoading=!1}},watch:{page(){this.loadProducts()},productsPerPage(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterMaterial(){this.loadProducts()},filterSeason(){this.loadProducts()},filterColor(){this.loadProducts()}},created(){this.loadProducts(),this.loadProductsCount()}},pt=ut,_t=(0,l.Z)(pt,k,I,!1,null,null,null),mt=_t.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",[t._v(" Страница не найдена ")])},vt=[],ht={},Ct=(0,l.Z)(ht,ft,vt,!1,null,null,null),gt=Ct.exports,yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.productLoading?r("PagePreloader"):t.productLoadingFailed?r("main",{staticClass:"content container"},[t._v(" Не удалось загрузить товар ")]):r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" "+t._s(t.category.title)+" ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),r("section",{staticClass:"item"},[r("div",{staticClass:"item__pics pics"},[r("div",{staticClass:"pics__wrapper"},[r("ProductImage",{staticClass:"product-page__image",attrs:{product:t.product,selectedColor:t.selectedColor}})],1),t.gallery?r("ul",{staticClass:"pics__list"},t._l(t.productOptions,(function(e){return r("li",{key:e.id,staticClass:"pics__item"},[r("label",{staticClass:"product-page__image-label"},[r("div",{staticClass:"pics__link",class:{"pics__link--current":t.isActiveImage(e.color.id)}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedColor,expression:"selectedColor"}],staticClass:"product-page__image-input",attrs:{type:"radio"},domProps:{value:e.color.id,checked:t._q(t.selectedColor,e.color.id)},on:{change:function(r){t.selectedColor=e.color.id}}}),r("img",{attrs:{width:"98",height:"98",src:e.gallery[0].file.url,alt:t.product.title}})])])])})),0):t._e()]),r("div",{staticClass:"item__info"},[r("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),r("h2",{staticClass:"item__title"},[t._v(t._s(t.product.title))]),r("div",{staticClass:"item__form"},[r("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[r("div",{staticClass:"item__row item__row--center"},[r("ProductCounter",{staticClass:"product-page__counter",attrs:{amount:t.productAmount},on:{"update:amount":function(e){t.productAmount=e}}}),r("b",{staticClass:"item__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ₽")])],1),r("div",{staticClass:"item__row"},[r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Цвет")]),r("ProductColors",{attrs:{colors:t.colors},on:{updateColor:function(e){t.selectedColor=e}}})],1),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Размер")]),r("label",{staticClass:"form__label form__label--small form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSize,expression:"selectedSize"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedSize=e.target.multiple?r:r[0]}}},t._l(t.sizes,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])})),0)])])]),r("button",{staticClass:"item__button button button--primery",attrs:{type:"submit",disabled:t.productAddSending}},[t._v(" В корзину ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.productAdded,expression:"productAdded"}],staticClass:"success-message"},[t._v("Товар добавлен в корзину")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.productAddSending,expression:"productAddSending"}],staticClass:"sending-message"},[t._v("Добавляем товар в корзину...")])])])]),r("div",{staticClass:"item__desc"},[r("ul",{staticClass:"tabs"},[r("li",{staticClass:"tabs__item"},[r("a",{staticClass:"tabs__link",class:{"tabs__link--current":t.isActive("productInfo")},on:{click:function(e){return e.preventDefault(),t.setActiveTab("productInfo")},keypress:function(e){return e.preventDefault(),t.setActiveTab("productInfo")}}},[t._v(" Информация о товаре ")])]),r("li",{staticClass:"tabs__item"},[r("a",{staticClass:"tabs__link",class:{"tabs__link--current":t.isActive("productProperty")},on:{click:function(e){return e.preventDefault(),t.setActiveTab("productProperty")},keypress:function(e){return e.preventDefault(),t.setActiveTab("productProperty")}}},[t._v(" Доставка и возврат ")])])]),r("div",{staticClass:"item__content fade",class:{"show-active-tab":t.isActive("productInfo")}},[r("h3",[t._v("Состав:")]),r("p",[t._v(" 60% хлопок"),r("br"),t._v(" 30% полиэстер"),r("br")]),r("h3",[t._v("Уход:")]),r("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),r("br"),t._v(" Гладить при макс. 110ºC"),r("br"),t._v(" Не использовать машинную сушку"),r("br"),t._v(" Отбеливать запрещено"),r("br"),t._v(" Не подвергать химчистке"),r("br")])]),r("div",{staticClass:"item__content fade",class:{"show-active-tab":t.isActive("productProperty")}},[r("h3",[t._v("Доставка:")]),r("p",[t._v(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),r("br"),t._v(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),r("br")]),r("h3",[t._v("Возврат:")]),r("p",[t._v(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),r("br"),t._v(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),r("br"),t._v(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),r("br")])])])])])],1)},bt=[],Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form__counter"},[r("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){t.computedAmount--}}},[r("svg",{attrs:{fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-minus"}})])]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.computedAmount,expression:"computedAmount",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.computedAmount},on:{input:function(e){e.target.composing||(t.computedAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){t.computedAmount++}}},[r("svg",{attrs:{fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-plus"}})])])])},kt=[],It={props:["amount"],computed:{computedAmount:{get(){return this.amount},set(t){t>=0&&this.$emit("update:amount",t)}}}},Dt=It,Tt=(0,l.Z)(Dt,Pt,kt,!1,null,null,null),$t=Tt.exports,wt={data(){return{productAmount:1,productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1,selectedColor:"",selectedSize:"",gallery:"",productOptions:"",activeItem:"productInfo"}},components:{ProductCounter:$t,ProductColors:M,PagePreloader:v,ProductImage:B},filters:{numberFormat:x},computed:{product(){return this.productData},category(){return this.productData.category},colors(){return this.productData.colors},sizes(){return this.productData.sizes}},methods:{...(0,h.nv)(["addProductToCart"]),isActive(t){return this.activeItem===t},setActiveTab(t){this.activeItem=t},isActiveImage(t){return this.selectedColor===t},addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,amount:this.productAmount,sizeId:this.selectedSize,colorId:this.selectedColor}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},async loadProduct(){try{this.productLoading=!0,this.productLoadingFailed=!1;const t=Y().get(`${tt}/api/products/${this.$route.params.id}`),e=await t;this.productData=e.data,this.gallery=e.data.colors[0].gallery,this.productOptions=e.data.colors,this.selectedColor=e.data.colors[0].color.id,this.selectedSize=e.data.sizes[0].id}catch(t){this.productLoadingFailed=!0}this.productLoading=!1}},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}}},xt=wt,At=(0,l.Z)(xt,yt,bt,!1,null,null,null),Ft=At.exports,St=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0)]),r("div",{staticClass:"content__row"},[r("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),r("span",{staticClass:"content__info"},[t._v(" "+t._s(t.cartLength)+" товара(ов) ")])])]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[r("div",{staticClass:"cart__field"},[t.cartloading?r("PagePreloader"):t._e(),r("ul",{staticClass:"cart__list"},t._l(t.products,(function(t){return r("CartItem",{key:t.product.productCode,attrs:{item:t}})})),1)],1),r("div",{staticClass:"cart__block"},[r("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),r("p",{staticClass:"cart__price"},[t._v(" Итого: "),r("span",[t._v(t._s(t._f("numberFormat")(t.totalPrice)))])]),r("router-link",{directives:[{name:"show",rawName:"v-show",value:0==!t.cartLength,expression:"!cartLength == 0"}],staticClass:"cart__button button button--primery",attrs:{type:"submit",to:{name:"order"}}},[t._v(" Оформить заказ ")])],1)])])])},Et=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])}],Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"cart__item product"},[r("div",{staticClass:"product__pic"},[r("ProductImage",{staticClass:"cart-item__image",attrs:{product:this.product,selectedColor:t.item.colorId}})],1),r("h3",{staticClass:"product__title"},[t._v(t._s(t.item.product.title))]),r("p",{staticClass:"product__info product__info--size"},[t._v("Размер: "+t._s(t.item.sizeTitle))]),r("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),r("span",[r("i",{style:{"background-color":t.item.colorCode}}),t._v(" "+t._s(t.item.colorTitle)+" ")])]),r("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.item.productCode)+" ")]),r("ProductCounter",{staticClass:"cart-item__counter",attrs:{amount:t.amount},on:{"update:amount":function(e){t.amount=e}}}),r("b",{staticClass:"product__price"},[t._v(t._s(t._f("numberFormat")(t.item.amount*t.item.product.price)))]),r("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return e.preventDefault(),t.deleteProduct(t.item.productCode)}}},[r("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-close"}})])])],1)},Mt=[],Lt={filters:{numberFormat:x},components:{ProductCounter:$t,ProductImage:B},props:["item"],computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{basketItemId:this.item.productCode,amount:t})}},product(){return this.item.product}},methods:{...(0,h.nv)(["deleteCartProduct"]),deleteProduct(t){this.deleteCartProduct({basketItemId:t})}}},Zt=Lt,Nt=(0,l.Z)(Zt,Ot,Mt,!1,null,null,null),Kt=Nt.exports,zt={props:["cartloading"],filters:{numberFormat:x},components:{CartItem:Kt,PagePreloader:v},computed:{...(0,h.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice",cartLength:"cartLength"})}},Bt=zt,Vt=(0,l.Z)(Bt,St,Et,!1,null,null,null),qt=Vt.exports,Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),t._m(1)]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.order.apply(null,arguments)}}},[r("div",{staticClass:"cart__field"},[r("div",{staticClass:"cart__data"},[r("BaseFormText",{attrs:{error:t.formError.name,title:"ФИО",placeholder:"Введите ваше полное имя"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),r("BaseFormText",{attrs:{error:t.formError.address,title:"Адрес доставки",placeholder:"Введите ваш адрес"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}}),r("BaseFormText",{attrs:{error:t.formError.phone,title:"Телефон",placeholder:"Введите ваш телефон"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),r("BaseFormText",{attrs:{error:t.formError.email,title:"Email",placeholder:"Введи ваш Email"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),r("BaseFormTextarea",{attrs:{title:"Комментарий к заказу",error:t.formError.comment,placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(e){t.$set(t.formData,"comment",e)},expression:"formData.comment"}})],1),r("div",{staticClass:"cart__options"},[r("h3",{staticClass:"cart__title"},[t._v("Доставка")]),r("DeliveryType",{attrs:{deliveryData:t.deliveryData},on:{updateDeliveryType:function(e){t.deliveryType=e}}}),r("h3",{staticClass:"cart__title"},[t._v("Оплата")]),r("PaymentType",{attrs:{paymentData:t.paymentData},on:{updatePaymentType:function(e){t.paymentType=e}}})],1)]),r("div",{staticClass:"cart__block"},[r("ul",{staticClass:"cart__orders"},t._l(t.products,(function(t){return r("OrderProduct",{key:t.product.productCode,attrs:{item:t}})})),1),r("div",{staticClass:"cart__total"},[t._m(2),r("p",[t._v("Итого: "),r("b",[t._v(t._s(t.cartLength))]),t._v(" товара на сумму "),r("b",[t._v(t._s(t.totalPrice)+" ₽")])])]),r("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit",disabled:t.orderSending}},[t._v(" Оформить заказ ")])]),t.orderSending?r("div",[t._v(" Подождите, идёт оформление заказа... ")]):t._e(),t.formErrorMessage?r("div",{staticClass:"cart__error form__error-block"},[r("h4",[t._v("Заявка не отправлена!")]),r("p",[t._v(" "+t._s(t.formErrorMessage)+" ")])]):t._e(),t.formError.paymentTypeId?r("div",{staticClass:"cart__error form__error-block"},[r("h4",[t._v("Заявка не отправлена!")]),r("p",[t._v(" "+t._s(t.formError.paymentTypeId)+" ")])]):t._e()])])])},jt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content__row"},[r("h1",{staticClass:"content__title"},[t._v("Оформление заказа")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Доставка: "),r("b",[t._v("0 ₽")])])}],Gt=(r(7658),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseFormField",{attrs:{title:t.title,error:t.error}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{type:"text",name:"name",placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])}),Ht=[],Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form__label"},[t._t("default"),r("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?r("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)},Qt=[],Rt={props:["title","error"]},Wt=Rt,Xt=(0,l.Z)(Wt,Jt,Qt,!1,null,null,null),Yt=Xt.exports,te={props:["title","error","placeholder","value"],components:{BaseFormField:Yt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},ee={mixins:[te]},re=ee,ae=(0,l.Z)(re,Gt,Ht,!1,null,null,null),se=ae.exports,oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseFormField",{attrs:{title:t.title,error:t.error}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])},ie=[],ce={props:["type"],mixins:[te]},le=ce,ne=(0,l.Z)(le,oe,ie,!1,null,null,null),de=ne.exports,ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"cart__order"},[r("h3",[t._v(t._s(t.item.product.title))]),r("b",[t._v(t._s(t.item.product.price)+" ₽")]),t.item.id?r("span",[t._v("Артикул: "+t._s(t.item.id))]):r("span",[t._v("Артикул: "+t._s(t.item.productCode))])])},pe=[],_e={props:["item"]},me=_e,fe=(0,l.Z)(me,ue,pe,!1,null,null,null),ve=fe.exports,he=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"cart__options options"},t._l(t.deliveryData,(function(e){return r("li",{key:e.id,staticClass:"options__item"},[r("label",{staticClass:"options__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryType,expression:"deliveryType"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery"},domProps:{value:e.id,checked:t._q(t.deliveryType,e.id)},on:{click:t.changeDeliveryType,change:function(r){t.deliveryType=e.id}}}),r("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" "),r("b",[t._v(t._s(e.price)+" ₽")])])])])})),0)},Ce=[],ge={data(){return{deliveryType:1}},props:["deliveryData"],methods:{changeDeliveryType(t){this.deliveryType=Number(t.target.value),this.$emit("updateDeliveryType",this.deliveryType)}}},ye=ge,be=(0,l.Z)(ye,he,Ce,!1,null,null,null),Pe=be.exports,ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"cart__options options"},t._l(t.paymentData,(function(e){return r("li",{key:e.id,staticClass:"options__item"},[r("label",{staticClass:"options__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentType,expression:"paymentType"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay"},domProps:{value:e.id,checked:t._q(t.paymentType,e.id)},on:{click:t.changePaymentType,change:function(r){t.paymentType=e.id}}}),r("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" ")])])])})),0)},Ie=[],De={data(){return{paymentType:1}},props:["paymentData"],methods:{changePaymentType(t){this.paymentType=Number(t.target.value),this.$emit("updatePaymentType",this.paymentType)}}},Te=De,$e=(0,l.Z)(Te,ke,Ie,!1,null,null,null),we=$e.exports,xe={data(){return{formData:{},formError:{},formErrorMessage:"",orderSending:!1,deliveryType:1,paymentType:1}},methods:{...(0,h.nv)(["loadDeliveryTypes","loadPaymentTypes"]),async order(){try{this.formError={},this.formErrorMessage="",this.orderSending=!0;const t=Y().post(`${tt}/api/orders`,{...this.formData,deliveryTypeId:this.deliveryType,paymentTypeId:this.paymentType},{params:{userAccessKey:this.$store.state.userAccessKey}}),e=await t;this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",e.data),this.$router.push({name:"orderInfo",params:{id:e.data.id}}),this.orderSending=!1}catch(t){this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message,this.orderSending=!1}}},components:{BaseFormText:se,BaseFormTextarea:de,OrderProduct:ve,DeliveryType:Pe,PaymentType:we},computed:{...(0,h.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice",cartLength:"cartLength"}),deliveryData(){return this.$store.state.deliveryData},paymentData(){return this.$store.state.paymentData}},created(){this.loadDeliveryTypes(),this.loadPaymentTypes()}},Ae=xe,Fe=(0,l.Z)(Ae,Ut,jt,!1,null,null,null),Se=Fe.exports,Ee=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[t.orderInfo?r("div",[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"order"}}},[t._v(" Оформление заказа ")])],1)]),t.orderInfo?r("h1",{staticClass:"content__title"},[t._v("Заказ оформлен "),r("span",[t._v("№ "+t._s(t.orderInfo.id))])]):t._e()]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[r("div",{staticClass:"cart__field"},[r("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),t.orderInfo?r("ul",{staticClass:"dictionary"},[r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.name)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.address)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),r("span",{staticClass:"dictionary__value"},[t._v(t._s(t.orderInfo.phone)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.email)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.paymentType)+" ")])])]):t._e()]),r("div",{staticClass:"cart__block"},[t.orderInfo?r("ul",{staticClass:"cart__orders"},t._l(t.orderInfo.basket.items,(function(t){return r("OrderProduct",{key:t.product.productCode,attrs:{item:t}})})),1):t._e(),t.orderInfo?r("div",{staticClass:"cart__total"},[r("p",[t._v("Доставка: "),r("b",[t._v(t._s(t.orderInfo.deliveryType.price)+" ₽")])]),r("p",[t._v("Итого: "),r("b",[t._v(t._s(t.orderInfo.basket.items.length))]),t._v(" товара на сумму "),r("b",[t._v(t._s(t.orderInfo.totalPrice)+" ₽")])])]):t._e()])])])]):r("div",[t._v("Заказ не найден")])])},Oe=[],Me={components:{OrderProduct:ve},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)},computed:{orderInfo(){return this.$store.state.orderInfo}},watch:{"$route.params.id":function(){this.$store.dispatch("loadOrderInfo",this.$route.params.id)}}},Le=Me,Ze=(0,l.Z)(Le,Ee,Oe,!1,null,null,null),Ne=Ze.exports;a.Z.use(P.ZP);const Ke=[{path:"/",name:"main",component:mt},{path:"/product/:id",name:"product",component:Ft},{path:"/cart",name:"cart",component:qt},{path:"*",name:"notFound",component:gt},{path:"/order",name:"order",component:Se},{path:"/order/:id",name:"orderInfo",component:Ne}],ze=new P.ZP({routes:Ke});var Be=ze;a.Z.use(h.ZP);var Ve=new h.ZP.Store({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:null,deliveryData:"",paymentData:""},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const r=t.cartProductsData.find((t=>t.id===e.productCode)).product;return{...e,product:{...r}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},cartLength(t){return t.cartProducts.length}},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{basketItemId:e,amount:r}){const a=t.cartProducts.find((t=>t.productCode===e));a&&(a.amount=r)},deleteCartProduct(t,e){t.cartProducts=t.cartProducts.filter((t=>t.productCode!==e))},updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productCode:t.id,amount:t.quantity,colorId:t.color.color.id,colorCode:t.color.color.code,colorTitle:t.color.color.title,sizeId:t.size.id,sizeTitle:t.size.title})))},updateDeliveryData(t,e){t.deliveryData=e},updatePaymentTypes(t,e){t.paymentData=e}},actions:{async loadOrderInfo(t,e){try{const r=Y().get(`${tt}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}),a=await r;t.commit("updateOrderInfo",a.data)}catch(r){t.commit("updateOrderInfo")}},async loadCart(t){const e=Y().get(`${tt}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}),r=await e;t.state.userAccessKey||(localStorage.setItem("userAccessKey",r.data.user.accessKey),t.commit("updateUserAccessKey",r.data.user.accessKey)),t.commit("updateCartProductsData",r.data.items),t.commit("syncCartProducts")},async addProductToCart(t,{productId:e,colorId:r,sizeId:a,amount:s}){const o=Y().post(`${tt}/api/baskets/products`,{productId:e,colorId:r,sizeId:a,quantity:s},{params:{userAccessKey:t.state.userAccessKey}}),i=await o;t.commit("updateCartProductsData",i.data.items),t.commit("syncCartProducts")},async updateCartProductAmount(t,{basketItemId:e,amount:r}){if(t.commit("updateCartProductAmount",{basketItemId:e,amount:r}),!(r<1))try{const a=Y().put(`${tt}/api/baskets/products`,{basketItemId:e,quantity:r},{params:{userAccessKey:t.state.userAccessKey}}),s=await a;t.commit("updateCartProductsData",s.data.items)}catch(a){t.commit("syncCartProducts")}},async deleteCartProduct(t,{basketItemId:e}){await Y()["delete"](`${tt}/api/baskets/products`,{params:{userAccessKey:t.state.userAccessKey},data:{basketItemId:e}}),t.commit("deleteCartProduct",e)},async loadDeliveryTypes(t){const e=Y().get(`${tt}/api/deliveries`,{}),r=await e;t.commit("updateDeliveryData",r.data)},async loadPaymentTypes(t){const e=Y().get(`${tt}/api/payments`,{params:{deliveryTypeId:1}}),r=await e;t.commit("updatePaymentTypes",r.data)}},modules:{}});a.Z.config.productionTip=!1,new a.Z({router:Be,store:Ve,render:t=>t(b)}).$mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,o){if(!a){var i=1/0;for(d=0;d<t.length;d++){a=t[d][0],s=t[d][1],o=t[d][2];for(var c=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((function(t){return r.O[t](a[l])}))?a.splice(l--,1):(c=!1,o<i&&(i=o));if(c){t.splice(d--,1);var n=s();void 0!==n&&(e=n)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,s,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,i=a[0],c=a[1],l=a[2],n=0;if(i.some((function(e){return 0!==t[e]}))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(l)var d=l(r)}for(e&&e(a);n<i.length;n++)o=i[n],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(d)},a=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(2604)}));a=r.O(a)})();
//# sourceMappingURL=app.aec377f3.js.map